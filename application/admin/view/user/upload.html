<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>批量上传员工excel</title>
    <link rel="stylesheet" href="__ADMIN__/layui/css/layui.css">
   
</head>
<body>


<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
    <legend>批量上传员工信息 <a href="{:url('user/index')}" class="layui-btn layui-btn-small">回到员工列表</a>
	</legend>	
</fieldset>


 

  <div style="text-align:center;">
    
    <button type="button" class="layui-btn" id="test1">
      <i class="layui-icon">&#xe67c;</i>上传图片
    </button>
  </div>


 
<script src="__ADMIN__/layui/layui.js"></script>
<script>
  /*
layui.use(['form','upload','layer'], function(){
  layui.upload([
    unwrap:false,
    title:'',
    url:"{:url('user/upload')}"
  ]);
   
 
});

*/


layui.use('upload', function(){
  var upload = layui.upload;
   
  //执行实例
  var uploadInst = upload.render({
    elem: '#test1' //绑定元素
    ,url:'/admin/user/upload'  //上传接口
    ,exts:'xls|xlsx'
    ,size:'20000'
    ,accept: 'file'
    ,method:'post'
    ,before: function(){
                console.log('接口地址：'+ this.url, this.item, {tips: 1});
            }
    ,done: function(res){
      //上传完毕回调
      layer.msg(res.msg);
      console.log(res.code);
      if (res.code == 404) {
            return layer.msg(res.msg);
          }
          //上传成功
       if (res.code == 1) {
            return layer.msg(res.msg);
          }
    }
    ,error: function(){
      //请求异常回调
       //layer.msg("error msg");
    }
  });
});

/*
 before: function(){
                console.log('接口地址：'+ this.url, this.item, {tips: 1});
            },

            "{:url('user/upload')}"
*/
</script>
</body>
</html>